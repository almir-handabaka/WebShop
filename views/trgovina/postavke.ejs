<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>
        <%= title %>
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="/stylesheets/trgovac.css" rel="stylesheet">
    <style>

    </style>

    <!-- Custom styles for this template -->
    <script src="/javascripts/trgovina.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body class="purple">
    <%- include('../partials/trgovac_hm.ejs') %>

        <div class="px-4 py-1 my-2 ">
            <div class="col-lg-10 mx-auto">
                <div class="album py-2">
                    <div class="container">
                        <main id="main">
                            <div class="px-4 py-2 my-2 text-center">

                                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor"
                                    class="bi bi-gear-fill" viewBox="0 0 16 16">
                                    <path
                                        d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z" />
                                </svg>

                                <h1 class="display-5 fw-bold"></h1>
                                <div class="col-lg-10 mx-auto">
                                    <div class="accordion" id="accordionPanelsStayOpenExample">
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                    data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true"
                                                    aria-controls="panelsStayOpen-collapseOne">
                                                    Detalji o trgovini
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseOne"
                                                class="accordion-collapse collapse show"
                                                aria-labelledby="panelsStayOpen-headingOne">
                                                <div class="accordion-body">
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4"
                                                            id="basic-addon1">Naziv</span>
                                                        <input type="text" class="form-control col-8"
                                                            placeholder="Naziv" aria-label="Username"
                                                            aria-describedby="basic-addon1" name="naziv"
                                                            value="<%= data[0].naziv %> ">
                                                    </div>
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4" id="basic-addon1">Ime
                                                            vlasnika</span>
                                                        <input type="text" class="form-control col-8" placeholder="Ime"
                                                            aria-label="Username" aria-describedby="basic-addon1"
                                                            disabled value="<%= data[0].ime %>">
                                                    </div>
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4" id="basic-addon1">Prezime
                                                            vlasnika</span>
                                                        <input type="text" class="form-control col-8"
                                                            placeholder="Prezime" aria-label="Username"
                                                            aria-describedby="basic-addon1" disabled value="<%= data[0].prezime
                                                            %>">
                                                    </div>
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4" id="basic-addon1">Kontakt
                                                            telefon</span>
                                                        <input type="text" class="form-control col-8"
                                                            placeholder="xxx-xxx-xxx" aria-label="Username"
                                                            aria-describedby="basic-addon1" name="kontakt_tel" value="<%= data[0].broj_mobitela
                                                            %>">
                                                    </div>
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4"
                                                            id="basic-addon1">Email</span>
                                                        <input type="text" class="form-control col-8"
                                                            placeholder="Username" aria-label="Username"
                                                            aria-describedby="basic-addon1" disabled value="<%= data[0].email
                                                            %>">
                                                    </div>

                                                    <div class="input-group">
                                                        <span class="input-group-text">Opis trgovine</span>
                                                        <textarea class="form-control"
                                                            aria-label="With textarea"><%= data[0].opis %></textarea>
                                                    </div>
                                                    <div class="col-auto">
                                                        <button type="submit" class="btn btn-primary mb-3 mt-3">Promjeni
                                                            detalje</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                                                <button class="accordion-button collapsed" type="button"
                                                    data-bs-toggle="collapse"
                                                    data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false"
                                                    aria-controls="panelsStayOpen-collapseFour">
                                                    Poslovnice
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse"
                                                aria-labelledby="panelsStayOpen-headingFour">
                                                <div class="accordion-body">
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4"
                                                            id="basic-addon1">Kanton</span>
                                                        <select id="kantonSelekt"
                                                            class="form-select form-select-sm form-control col-8"
                                                            aria-label=".form-select-sm example">
                                                            <% for(let i=0;i<kanton.length;i++) {%>
                                                                <option value="<%= kanton[i].id_kantona  %>">
                                                                    <%= kanton[i].naziv_kantona %>
                                                                </option>
                                                                <% } %>

                                                        </select>
                                                    </div>
                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4"
                                                            id="basic-addon1">Grad</span>

                                                        <select id="gradSelekt"
                                                            class="form-select form-select-sm form-control col-8"
                                                            aria-label=".form-select-sm example">
                                                            <% for(let i=0;i<grad.length;i++) {%>
                                                                <option kanton="<%=grad[i].kanton%>"
                                                                    value="<%= grad[i].id_grada  %>">
                                                                    <%= grad[i].naziv_grada %>
                                                                </option>
                                                                <% } %>
                                                        </select>
                                                    </div>

                                                    <div class="input-group mb-3 row">
                                                        <span class="input-group-text col-4"
                                                            id="basic-addon1">Adresa</span>
                                                        <input type="text" class="form-control col-8"
                                                            placeholder="Adresa" aria-label="Username"
                                                            aria-describedby="basic-addon1">
                                                    </div>

                                                    <div class="col-auto">
                                                        <button type="submit" class="btn btn-primary mb-3">Dodaj
                                                            poslovnicu</button>
                                                    </div>
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">#</th>
                                                                <th scope="col">Kanton</th>
                                                                <th scope="col">Grad</th>
                                                                <th scope="col">Adresa</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <% for(let i=0;i<data.length;i++) {%>
                                                                <tr>
                                                                    <th scope="row">
                                                                        <%= i+1 %>
                                                                    </th>
                                                                    <td>
                                                                        <%= data[i].naziv_kantona %>
                                                                    </td>
                                                                    <td>
                                                                        <%= data[i].naziv_grada %>
                                                                    </td>
                                                                    <td>
                                                                        <%= data[i].adresa_poslovnice %>
                                                                    </td>
                                                                    <td><button type="button"
                                                                            class="btn-close btn-danger"
                                                                            aria-label="Close"></button></td>
                                                                </tr>
                                                                <% } %>


                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                                                <button class="accordion-button collapsed" type="button"
                                                    data-bs-toggle="collapse"
                                                    data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
                                                    aria-controls="panelsStayOpen-collapseTwo">
                                                    Profilna slika
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse"
                                                aria-labelledby="panelsStayOpen-headingTwo">
                                                <div class="card mb-3 text-dark bg-light border-light py-4"
                                                    style="max-width: 800px;">
                                                    <div class="row g-0">
                                                        <div class="col-md-4">
                                                            <% if(data[0].url_profilna_slika !=null) {%>
                                                                <img src="/data/uploads/<%= data[0].url_profilna_slika %>"
                                                                    class="img-fluid rounded-start" alt="...">
                                                                <% } %>
                                                                    <% if(data[0].url_profilna_slika===null) {%>
                                                                        <img src="/data/uploads/default-avatar-profile.jpg"
                                                                            class="img-fluid rounded-start " alt="..."
                                                                            style="height: 70%;">
                                                                        <% } %>
                                                        </div>
                                                        <div class="col-md-8 py-2">
                                                            <div class="card-body">
                                                                <h5 class="card-title">Uploaduj sliku</h5>

                                                                <div class="form-row align-items-center">
                                                                    <form action="/trgovina/profilna" method="post"
                                                                        enctype="multipart/form-data">
                                                                        <div class="input-group">
                                                                            <input type="file" class="form-control"
                                                                                id="inputGroupFile04"
                                                                                aria-describedby="inputGroupFileAddon04"
                                                                                aria-label="Upload">
                                                                            <button class="btn btn-primary"
                                                                                type="button "
                                                                                id="inputGroupFileAddon04">Sačuvaj</button>
                                                                        </div>
                                                                    </form>
                                                                </div>

                                                                <p class="card-text"><small class="text-muted">Zadnji
                                                                        put promjenjena prije 3
                                                                        minute</small></p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                                                <button class="accordion-button collapsed" type="button"
                                                    data-bs-toggle="collapse"
                                                    data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                                                    aria-controls="panelsStayOpen-collapseThree">
                                                    Promjena šifre
                                                </button>
                                            </h2>
                                            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse"
                                                aria-labelledby="panelsStayOpen-headingThree">
                                                <div class="accordion-body">

                                                    <form action="/promjena_sifre" method=post
                                                        oninput='up2.setCustomValidity(up2.value != up.value ? "Passwords do not match." : "")'>
                                                        <div class="input-group mb-3 row">
                                                            <span class="input-group-text col-4" id="basic-addon1">Nova
                                                                lozinka</span>
                                                            <input type="text" class="form-control col-8"
                                                                placeholder="Username" aria-label="Username"
                                                                aria-describedby="basic-addon1" id="password1"
                                                                type=password required name=up>
                                                        </div>
                                                        <div class="input-group mb-3 row">
                                                            <span class="input-group-text col-4"
                                                                id="basic-addon1">Potvrdi lozinku</span>
                                                            <input id="password2" type=password name=up2
                                                                class="form-control col-8" placeholder="Username"
                                                                aria-label="Username" aria-describedby="basic-addon1">
                                                        </div>


                                                        <div class="col-auto">
                                                            <button type="submit" class="btn btn-primary mb-3">Promjeni
                                                                sifru</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                </div>
            </div>
        </div>

        </div>
        </div>



        <script>
            (function () {
                'use strict'

                document.querySelector('#navbarSideCollapse').addEventListener('click', function () {
                    console.log("Open");
                    document.querySelector('.offcanvas-collapse').classList.toggle('open')
                })
            })()

            $(document).ready(function () {
                $('#kantonSelekt').change(function () {
                    var filter = $(this).val();

                    $('#gradSelekt').children().each(function () {
                        if ($(this).attr("kanton") === filter) {
                            $(this).show().attr("selected", "selected");;
                        } else {
                            $(this).hide();
                        }

                        // $('#gradSelekt').val(this);
                    })
                })

                $('#kantonSelekt').trigger("change");
            })




        </script>
</body>

</html>